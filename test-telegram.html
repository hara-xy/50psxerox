<!DOCTYPE html>
<html>
<head>
    <title>Telegram Document Test</title>
</head>
<body>
    <h1>Telegram Document Sending Test</h1>
    <input type="file" id="fileInput" />
    <button id="sendButton">Send to Telegram</button>
    <div id="result"></div>

    <script type="module">
        import { sendWorkflowToTelegram } from './TelegramService.js';

        document.getElementById('sendButton').addEventListener('click', async () => {
            const fileInput = document.getElementById('fileInput');
            const resultDiv = document.getElementById('result');
            
            if (!fileInput.files.length) {
                resultDiv.innerHTML = '<p style="color: red;">Please select a file first!</p>';
                return;
            }
            
            const file = fileInput.files[0];
            resultDiv.innerHTML = '<p>Sending file...</p>';
            
            try {
                // Create mock data to test the function
                const mockNodes = [
                    {
                        id: 'document-1',
                        type: 'document',
                        data: {
                            label: file.name,
                            size: (file.size / 1024).toFixed(2) + ' KB',
                            pages: '1'
                        },
                        file: file
                    },
                    {
                        id: 'print-options',
                        type: 'print-options',
                        data: {
                            copies: '1',
                            color: 'Black & White',
                            paperSize: 'A4'
                        }
                    }
                ];
                
                const success = await sendWorkflowToTelegram(
                    'Test User',
                    'test@example.com',
                    mockNodes,
                    [],
                    []
                );
                
                if (success) {
                    resultDiv.innerHTML = '<p style="color: green;">File sent successfully!</p>';
                } else {
                    resultDiv.innerHTML = '<p style="color: red;">Failed to send file.</p>';
                }
            } catch (error) {
                console.error('Error:', error);
                resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>